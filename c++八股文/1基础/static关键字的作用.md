static的用法

1. 修饰局部变量（函数内部）
  作用：  让局部变量只初始化一次，并在函数执行结束后仍保留它的值
  生命：  周期变量的生命周期从程序开始到程序结束，
  作用域：作用域仍然是函数内部
  初始化：静态局部变量，在第一次执行到这一行时初始化，后续不再初始化。静态局部变量，如果没有显式初始化，编译器自动初始化为0.
  c++ 11开始，编译器保证了线程安全，即magic statics

2. 修饰全局变量或函数
把全局变量或函数的链接属性(external linkage)改成内部链接(internal linkage)，即只能在当前源文件中访问，防止命名冲突。
如果不加static，默认是外部链接(external linkage)，可以被其他文件引用。
!普通全局变量和静态全局变量都在程序启动时初始化，二者的区别知识作用域不同。

3. 修饰静态成员变量和静态成员函数
静态成员变量: 在类的所有对象之间共享，不属于任何一个对象，而是类本身的成员。
静态成员函数: 只能访问静态成员变量和静态成员函数，不能访问非静态的类成员。




扩展：
一个头文件里定义了一个静态全局变量myVar，该头文件被不同的cpp文件include，会发生什么？
回到静态全局变量的定义，static将全局变量的链接属性改为内部链接，那么，每个cpp文件都会有一个自己的静态全局变量myVar，互不干扰，各自维护各自的副本。不会链接失败，不会报重复定义的错误。

如果想要一个全局共享的变量，通常应该：
在头文件中声明，用extern
然后在某个cpp文件中定义
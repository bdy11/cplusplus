std::atomic是c++ 11引入的一个模板类。
使用时，要include <atomic> 头文件。
atomic适用于多线程环境，原子操作保证了线程安全，避免了数据竞争(data race)。
应用场景
- 多线程计数器
- 无锁队列
- 共享变量的安全访问(如状态标志)
- 轻量级同步(避免Mutex开销)

atomic实现原子操作的机制
1. 如果cpu提供原生无锁支持，则atomic通过硬件支持的原子指令来实现。
2. 如果不支持原生无锁支持，则使用锁mutex来模拟原子操作

Mutex的开销
mutex是c++提供的互斥锁，用于保证多个线程访问共享资源时的互斥性。
Mutex的主要开销包括
- 上下文切换context switching，当一个线程获取不到Mutex，它可能进入睡眠，操作系统需要进行线程调度，这涉及cpu切换上下文，消耗大量时间。
- 系统调用开销

总结
atomic依赖CPU原子指令，确保操作的不可中断性
内存屏障保证内存操作的可见性和顺序性
atomic适用于单变量，Mutex适用于多变量同步
高并发场景下，优先考虑无锁方案